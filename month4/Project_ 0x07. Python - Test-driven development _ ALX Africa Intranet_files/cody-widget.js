(function(t){l()})();async function l(){const t=window.codySettings.base_url||"https://getcody.ai",e=window.codySettings.widget_id,n=await fetch(`${t}/widget-backend/${e}/state`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({webpage:window.location.href})});if(n.status===404)throw`This Cody AI widget id appears to be invalid: ${e}`;if(n.status===403)throw"This domain does not appear to be authorized for this widget.";if(n.status!==200)throw"Cody AI widget seems to be unavailable at the moment.";const a=await n.json(),o=document.createElement("iframe");o.setAttribute("class","cody-iframe"),o.setAttribute("srcdoc",a.iframe_loading),r(o);const d=document.createElement("iframe");d.setAttribute("src",a.iframe),d.setAttribute("class","cody-iframe");const s=u(a.launcher);s.find(c=>c instanceof HTMLButtonElement).addEventListener("click",function(){m(i,o,d),i.hasAttribute("data-launcher-open")?i.removeAttribute("data-launcher-open"):i.setAttribute("data-launcher-open","")});const i=document.createElement("div");i.setAttribute("id","cody-wrapper"),i.append(...s),document.body.appendChild(i)}function m(t,e,n){n.isConnected||(t.appendChild(n),t.appendChild(e))}function r(t){window.addEventListener("message",({data:e})=>{e==="codyWidgetReady"&&(t.remove(),window.removeEventListener("message",r))},!1)}function u(t){const e=document.createElement("div");return e.innerHTML=t,e.childNodes.length===1?e.childNodes[0]:Array.from(e.childNodes)}
